webpackJsonp([59,39,64],{17:function(e,t,i){"use strict";var s=i(2),n=i(3),o=i(29),a=(i(1).create("destroy_on_escape"),s.Behavior.extend({initialize:function(e){var t=this.view[this.options.method];if(!n.isFunction(t))throw new Error("Invalid method");n.bindAll(this,"onEscape")},onAttach:function(){o.listen(this.view.cid,this.onEscape)},onEscape:function(){this.view[this.options.method]()},onBeforeDestroy:function(){o.unlisten(this.view.cid)}}));a.config=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.behaviorClass=a,n.defaults(e,{method:"destroy"}),e},e.exports=a},57:function(e,t,i){"use strict";function s(e){n.editpanel.trigger("error",e)}var n=i(12);e.exports=s},59:function(e,t,i){"use strict";var s=i(140).common;e.exports=s},107:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTIxIiBoZWlnaHQ9IjYxNCIgdmlld0JveD0iMCAwIDkyMSA2MTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJNMzc0LjIyIDE0Ni4zM2MtMTYuNjE1IDIxLjUyLTI0LjIyMiA0Mi4yMzktMjIuNzIgNjIuMjU3IDEuNCAxNC4xMTMgMy42MDMgMzAuNDI5IDYuNjA1IDQ4Ljk0NmwtMi4yMDIgMi4yMDFjLTEuNTAxLjgwMi0zLjIwMyAzLjAwMy01LjAwNCA2LjcwNi0xLjkwMyAzLjcwNC0yLjgwMyA4LjUxLTIuODAzIDE0LjQxNC44IDEwLjQxIDIuNDAyIDE4LjMxNyA1LjAwNSAyMy45MjIgMi41MDIgNS41MDUgNS4xMDQgOC43MDggNy43MDcgOS40MDggMi41MDIuNyA1LjEwNCAyLjIwMyA3LjcwNiA0LjQwNSAyLjYwMyAyLjIwMSA0LjIwNCA1LjYwNSA1LjAwNSAxMC4wMDkgMy43MDQgMTcuMTE2IDkuNjA5IDMwLjYyOCAxNy43MTYgNDAuNjM3IDguMTA5IDEwLjAxIDEyLjIxMiAxOS4xMTggMTIuMjEyIDI3LjIyNSAwIDIyLjIyLTYuMzA2IDM5LjgzNy0xOC44MTcgNTIuODUtMTIuNTExIDEyLjkxMi0zNi4xMzQgMjUuNzIzLTcwLjg2NiAzOC4zMzQtNzUuMzcgMjYuNzI1LTExMy4wMDQgNDkuMzQ2LTExMy4wMDQgNjcuODYzdjU4Ljk1NWg1MjAuNDh2LTU4Ljk1NWMwLTE4LjUxNy0zNy42MzQtNDEuMTM4LTExMy4wMDUtNjcuODYzLTMzLjkzMS0xMi42MTEtNTcuMzUzLTI1LjMyMi03MC4wNjQtMzguNDM0LTEzLjAxMi0xMy4wMTItMTkuNDE4LTMwLjYyOS0xOS40MTgtNTIuODUgMC04LjIwNiA0LjIwNS0xNy4xMTUgMTIuNzEyLTI2LjcyNCA4LjQwNy05LjYxIDE0LjExMy0yMy4zMjIgMTcuMTE1LTQxLjEzOC43LTQuNDA0IDIuNDA0LTcuODA4IDUuMDA1LTEwLjAwOSAyLjUwMi0yLjIwMyA1LjEwNS0zLjcwNCA3LjcwOC00LjQwNCAyLjUwMi0uNzAxIDUuMTAzLTMuODA0IDcuNzA3LTkuNDA5IDIuNjAxLTUuNjA1IDQuMzA0LTEzLjUxMyA1LjAwNS0yMy45MjMgMC0xMi41MS0zLjQwNC0yMC4zMTgtMTAuMDEtMjMuMzJsNi42MDYtNDguOTQ1YzIuMjAxLTIwLjAyLTUuMjA1LTQwLjczOC0yMi4xMi02Mi4yNThDNTMxLjQ2NSAxMjQuNzEgNTAyLjMzOCAxMTQgNDYxIDExNGMtNDEuMzM4IDAtNzAuMzY1IDEwLjcxLTg2Ljc4IDMyLjMzeiIvPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGZpbGw9IiNjZGUyZWYiIGQ9Ik0tMTItMTFoOTU4djYzOEgtMTJ6Ii8+PHVzZSBmaWxsLW9wYWNpdHk9Ii4zIiBmaWxsPSIjMDk3NEI2IiB4bGluazpocmVmPSIjYSIvPjwvZz48L3N2Zz4="},112:function(e,t,i){"use strict";var s=i(2),n=i(189),o=i(180),a=(i(1).create("signup"),s.View.extend({className:"progress",template:n,styles:o,initialize:function(){var e=this;this.listenTo(this.model,"change:percent",this.setPercentWidth),this.listenTo(this.model,"change:text",function(t,i){return e.setText(i)})},ui:{percent:".percent",text:".progress-text"},onRender:function(){this.setPercentWidth()},setPercentWidth:function(){var e=this.model.get("percent");this.ui.percent.css("width",e+"%")},setText:function(e){this.ui.text.text(e)}}));e.exports=a},138:function(e,t,i){var s=!1;!function(e){"use strict";"function"==typeof s&&s.amd?s(["jquery","jquery-ui/ui/widget"],e):e(i(35),i(178))}(function(e){"use strict";function t(t){var i="dragover"===t;return function(s){s.dataTransfer=s.originalEvent&&s.originalEvent.dataTransfer;var n=s.dataTransfer;n&&e.inArray("Files",n.types)!==-1&&this._trigger(t,e.Event(t,{delegatedEvent:s}))!==!1&&(s.preventDefault(),i&&(n.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(e,i){t=t.replace("{"+e+"}",i)}),t},formData:function(e){return e.serializeArray()},add:function(t,i){return!t.isDefaultPrevented()&&void((i.autoUpload||i.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()}))},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var s=e-this.timestamp;return(!this.bitrate||!i||s>i)&&(this.bitrate=(t-this.loaded)*(1e3/s)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,i){if(t.lengthComputable){var s,n=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&n-i._time<i.progressInterval&&t.loaded!==t.total)return;i._time=n,s=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=s-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(n,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=s,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(n,s,i.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),i),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var i=this,s=t.xhr?t.xhr():e.ajaxSettings.xhr();s.upload&&(e(s.upload).bind("progress",function(e){var s=e.originalEvent;e.lengthComputable=s.lengthComputable,e.loaded=s.loaded,e.total=s.total,i._onProgress(e,t)}),t.xhr=function(){return s})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var i,s=this,n=t.files[0],o=t.multipart||!e.support.xhrFileUpload,a="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),o&&!t.blob&&this._isInstanceOf("File",n)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(n.name)+'"'),o?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:a,value:t.blob}):e.each(t.files,function(s,n){i.push({name:"array"===e.type(t.paramName)&&t.paramName[s]||a,value:n})})):(s._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?i.append(a,t.blob,n.name):e.each(t.files,function(n,o){(s._isInstanceOf("File",o)||s._isInstanceOf("Blob",o))&&i.append("array"===e.type(t.paramName)&&t.paramName[n]||a,o,o.uploadName||o.name)})),t.data=i):(t.contentType=n.type||"application/octet-stream",t.data=t.blob||n),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),s=t.paramName;return s?e.isArray(s)||(s=[s]):(s=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",n=(t.prop("files")||[1]).length;n;)s.push(i),n-=1}),s.length||(s=[i.prop("name")||"files[]"])),s},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,s){var n=e.Deferred(),o=n.promise();return i=i||this.options.context||o,t===!0?n.resolveWith(i,s):t===!1&&n.rejectWith(i,s),o.abort=n.promise,this._enhancePromise(o)},_addConvenienceMethods:function(t,i){var s=this,n=function(t){return e.Deferred().resolveWith(s,t).promise()};i.process=function(t,o){return(t||o)&&(i._processQueue=this._processQueue=(this._processQueue||n([this])).then(function(){return i.errorThrown?e.Deferred().rejectWith(s,[i]).promise():n(arguments)}).then(t,o)),this._processQueue||n([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=s._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&s._onSend(t,this)),this.jqXHR||s._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",s._trigger("fail",null,this),s._getXHRPromise(!1))},i.state=function(){return this.jqXHR?s._getDeferredState(this.jqXHR):this._processQueue?s._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===s._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),s=i&&i.length>1&&parseInt(i[1],10);return s&&s+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var s,n,o=this,a=t.files[0],r=a.size,l=t.uploadedBytes,h=t.maxChunkSize||r,c=this._blobSlice,u=e.Deferred(),d=u.promise();return!(!(this._isXHRUpload(t)&&c&&(l||h<r))||t.data)&&(!!i||(l>=r?(a.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",a.error])):(n=function(){var i=e.extend({},t),d=i._progress.loaded;i.blob=c.call(a,l,l+h,a.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+r,o._initXHRData(i),o._initProgressListener(i),s=(o._trigger("chunksend",null,i)!==!1&&e.ajax(i)||o._getXHRPromise(!1,i.context)).done(function(s,a,h){l=o._getUploadedBytes(h)||l+i.chunkSize,d+i.chunkSize-i._progress.loaded&&o._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=s,i.textStatus=a,i.jqXHR=h,o._trigger("chunkdone",null,i),o._trigger("chunkalways",null,i),l<r?n():u.resolveWith(i.context,[s,a,h])}).fail(function(e,t,s){i.jqXHR=e,i.textStatus=t,i.errorThrown=s,o._trigger("chunkfail",null,i),o._trigger("chunkalways",null,i),u.rejectWith(i.context,[e,t,s])})},this._enhancePromise(d),d.abort=function(){return s.abort()},n(),d)))},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,s,n){var o=n._progress.total,a=n._response;n._progress.loaded<o&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o,total:o}),n),a.result=n.result=t,a.textStatus=n.textStatus=i,a.jqXHR=n.jqXHR=s,this._trigger("done",null,n)},_onFail:function(e,t,i,s){var n=s._response;s.recalculateProgress&&(this._progress.loaded-=s._progress.loaded,this._progress.total-=s._progress.total),n.jqXHR=s.jqXHR=e,n.textStatus=s.textStatus=t,n.errorThrown=s.errorThrown=i,this._trigger("fail",null,s)},_onAlways:function(e,t,i,s){this._trigger("always",null,s)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var s,n,o,a,r=this,l=r._getAJAXSettings(i),h=function(){return r._sending+=1,l._bitrateTimer=new r._BitrateTimer,s=s||((n||r._trigger("send",e.Event("send",{delegatedEvent:t}),l)===!1)&&r._getXHRPromise(!1,l.context,n)||r._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){r._onDone(e,t,i,l)}).fail(function(e,t,i){r._onFail(e,t,i,l)}).always(function(e,t,i){if(r._onAlways(e,t,i,l),r._sending-=1,r._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>r._sending)for(var s=r._slots.shift();s;){if("pending"===r._getDeferredState(s)){s.resolve();break}s=r._slots.shift()}0===r._active&&r._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),a=o.then(h)):(this._sequence=this._sequence.then(h,h),a=this._sequence),a.abort=function(){return n=[void 0,"abort","abort"],s?s.abort():(o&&o.rejectWith(l.context,n),h())},this._enhancePromise(a)):h()},_onAdd:function(t,i){var s,n,o,a,r=this,l=!0,h=e.extend({},this.options,i),c=i.files,u=c.length,d=h.limitMultiFileUploads,p=h.limitMultiFileUploadSize,g=h.limitMultiFileUploadSizeOverhead,f=0,m=this._getParamName(h),v=0;if(!u)return!1;if(p&&void 0===c[0].size&&(p=void 0),(h.singleFileUploads||d||p)&&this._isXHRUpload(h))if(h.singleFileUploads||p||!d)if(!h.singleFileUploads&&p)for(o=[],s=[],a=0;a<u;a+=1)f+=c[a].size+g,(a+1===u||f+c[a+1].size+g>p||d&&a+1-v>=d)&&(o.push(c.slice(v,a+1)),n=m.slice(v,a+1),n.length||(n=m),s.push(n),v=a+1,f=0);else s=m;else for(o=[],s=[],a=0;a<u;a+=d)o.push(c.slice(a,a+d)),n=m.slice(a,a+d),n.length||(n=m),s.push(n);else o=[c],s=[m];return i.originalFiles=c,e.each(o||c,function(n,a){var h=e.extend({},i);return h.files=o?a:[a],h.paramName=s[n],r._initResponseObject(h),r._initProgressObject(h),r._addConvenienceMethods(t,h),l=r._trigger("add",e.Event("add",{delegatedEvent:t}),h)}),l},_replaceFileInput:function(t){var i=t.fileInput,s=i.clone(!0),n=i.is(document.activeElement);t.fileInputClone=s,e("<form></form>").append(s)[0].reset(),i.after(s).detach(),n&&s.focus(),e.cleanData(i.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===i[0]?s[0]:t}),i[0]===this.element[0]&&(this.element=s)},_handleFileTreeEntry:function(t,i){var s,n=this,o=e.Deferred(),a=[],r=function(e){e&&!e.entry&&(e.entry=t),o.resolve([e])},l=function(e){n._handleFileTreeEntries(e,i+t.name+"/").done(function(e){o.resolve(e)}).fail(r)},h=function(){s.readEntries(function(e){e.length?(a=a.concat(e),h()):l(a)},r)};return i=i||"",t.isFile?t._file?(t._file.relativePath=i,o.resolve(t._file)):t.file(function(e){e.relativePath=i,o.resolve(e)},r):t.isDirectory?(s=t.createReader(),h()):o.resolve([]),o.promise()},_handleFileTreeEntries:function(t,i){var s=this;return e.when.apply(e,e.map(t,function(e){return s._handleFileTreeEntry(e,i)})).then(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var i,s,n=t.prop("webkitEntries")||t.prop("entries");if(n&&n.length)return this._handleFileTreeEntries(n);if(i=e.makeArray(t.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(s=t.prop("value"),!s)return e.Deferred().resolve([]).promise();i=[{name:s.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,s={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(s.fileInput).always(function(n){s.files=n,i.options.replaceFileInput&&i._replaceFileInput(s),i._trigger("change",e.Event("change",{delegatedEvent:t}),s)!==!1&&i._onAdd(t,s)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,s={files:[]};i&&i.length&&(e.each(i,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&s.files.push(i)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),s)!==!1&&this._onAdd(t,s))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=this,s=t.dataTransfer,n={};s&&s.files&&s.files.length&&(t.preventDefault(),this._getDroppedFiles(s).always(function(s){n.files=s,i._trigger("drop",e.Event("drop",{delegatedEvent:t}),n)!==!1&&i._onAdd(t,n)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_destroy:function(){this._destroyEventHandlers()},_setOption:function(t,i){var s=e.inArray(t,this._specialOptions)!==-1;s&&this._destroyEventHandlers(),this._super(t,i),s&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options,s=this.element.data();e.each(this.element[0].attributes,function(e,n){var o,a=n.name.toLowerCase();/^data-/.test(a)&&(a=a.slice(5).replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()}),o=s[a],t._isRegExpOption(a,o)&&(o=t._getRegExp(o)),i[a]=o)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,s,n=this,o=e.Deferred(),a=o.promise();return a.abort=function(){return s=!0,i?i.abort():(o.reject(null,"abort","abort"),a)},this._getFileInputFiles(t.fileInput).always(function(e){if(!s){if(!e.length)return void o.reject();t.files=e,i=n._onSend(null,t),i.then(function(e,t,i){o.resolve(e,t,i)},function(e,t,i){o.reject(e,t,i)})}}),this._enhancePromise(a)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})})},140:function(e,t){"use strict";var i={400:["USERNAME_INVALID","EMAIL_INVALID","FIRST_LAST_NAME_INVALID","PASSWORD_INVALID","MISSING_PARAM","JSON_CONTENT_TYPE_EXPECTED","URL_INVALID","CAPTCHA_FAILED"],401:["UNAUTHORIZED","CSRF_TOKEN_INVALID"],403:["PERMISSION_DENIED"],404:["ONBOARDING_ID_NOT_FOUND","NO_ITEM_WITH_THAT_ID","NO_SUCH_USER"],409:["USERNAME_TAKEN","EMAIL_TAKEN","DOMAIN_TAKEN"],429:["TOO_MANY_REQUESTS"]},s={},n={};Object.keys(i).forEach(function(e){e=parseInt(e),i[e].forEach(function(t){s[t]=e,n[t]=t})}),t.common=n;var o=function(e,i,s){var n=new t.UserError(e,i,s);this.status(n.data.status).send(n.data)};t.middleware=function(e,t,i){t.sendError=o.bind(t),t.err=n,i()},t.UserError=function e(t,i,n){if(!(this instanceof e))throw new Error('must use "new" keyword');var o={};if("object"==typeof t&&(o=t,t=o.type,i=i||o.msg,n=n||o.status),!t)throw new Error("'error_type' is required");o.type=t,"number"==typeof i&&(n=i,i=void 0),i&&(o.msg=i),n||(n=s[t]||400),o.status=n,this.message=o.type,this.data=o},t.UserError.prototype=Object.create(Error.prototype),t.errorMiddleware=function(e,i,s,n){e instanceof t.UserError?s.sendError(e.data.type,e.data.msg,e.data.status):n(e)}},173:function(e,t,i){t=e.exports=i(6)(),t.push([e.id,".progress .progress-text{margin-bottom:15px;font-size:16px}",""])},178:function(e,t,i){var s=!1;!function(e){"function"==typeof s&&s.amd?s(["jquery"],e):e(i(35))}(function(e){var t=0,i=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(e){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,o,a,r,l={},h=t.split(".")[0];return t=t.split(".")[1],n=h+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[h]=e[h]||{},o=e[h][t],a=e[h][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,o,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,o=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=o,t}}()):void(l[t]=s)}),a.prototype=e.widget.extend(r,{widgetEventPrefix:o?r.widgetEventPrefix||t:t},l,{constructor:a,namespace:h,widgetName:t,widgetFullName:n}),o?(e.each(o._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,a,i._proto)}),delete o._childConstructors):i._childConstructors.push(a),e.widget.bridge(t,a),a},e.widget.extend=function(t){for(var s,n,o=i.call(arguments,1),a=0,r=o.length;a<r;a++)for(s in o[a])n=o[a][s],o[a].hasOwnProperty(s)&&void 0!==n&&(e.isPlainObject(n)?t[s]=e.isPlainObject(t[s])?e.widget.extend({},t[s],n):e.widget.extend({},n):t[s]=n);return t},e.widget.bridge=function(t,s){var n=s.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"==typeof o,r=i.call(arguments,1),l=this;return a?this.each(function(){var i,s=e.data(this,n);return"instance"===o?(l=s,!1):s?e.isFunction(s[o])&&"_"!==o.charAt(0)?(i=s[o].apply(s,r),i!==s&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):(r.length&&(o=e.widget.extend.apply(null,[o].concat(r))),this.each(function(){var t=e.data(this,n);t?(t.option(o||{}),t._init&&t._init()):e.data(this,n,new s(o,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(i,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},s=t.split("."),t=s.shift(),s.length){for(n=a[t]=e.widget.extend({},this.options[t]),o=0;o<s.length-1;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,o=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,a){function r(){if(t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||e.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+o.eventNamespace,c=l[2];c?n.delegate(c,h,r):i.bind(h,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,o,a=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(e.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),a=!e.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){e(this)[t](),o&&o.call(s[0]),i()})}});e.widget})},180:function(e,t,i){var s=i(173),n=i(7);"string"==typeof s&&(s=[[e.id,s,""]]),e.exports=s.locals||{},e.exports._getContent=function(){return s},e.exports._getCss=function(){return s.toString()},e.exports._insertCss=function(e){return n(s,e)}},189:function(e,t,i){var s=i(5);e.exports=function(e){var t,i="";Array.prototype.join;return i+="",e.text&&(i+='\n    <div class="progress-text">'+(null==(t=e.text)?"":s.escape(t))+"</div>\n"),i+='\n<div class="progress-bar">\n    <div class="percent"></div>\n</div>\n'}},206:function(e,t,i){var s,n,o;!function(a){n=[i(35),i(93)],s=a,o="function"==typeof s?s.apply(t,n):s,!(void 0!==o&&(e.exports=o))}(function(e){var t=0,i=Array.prototype.slice;return e.cleanData=function(t){return function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(e){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,o,a,r={},l=t.split(".")[0];t=t.split(".")[1];var h=l+"-"+t;return s||(s=i,i=e.Widget),e.isArray(s)&&(s=e.extend.apply(null,[{}].concat(s))),e.expr[":"][h.toLowerCase()]=function(t){return!!e.data(t,h)},e[l]=e[l]||{},n=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,n,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(s,function(t,s){return e.isFunction(s)?void(r[t]=function(){function e(){return i.prototype[t].apply(this,arguments)}function n(e){return i.prototype[t].apply(this,e)}return function(){var t,i=this._super,o=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=o,t}}()):void(r[t]=s)}),o.prototype=e.widget.extend(a,{widgetEventPrefix:n?a.widgetEventPrefix||t:t},r,{constructor:o,namespace:l,widgetName:t,widgetFullName:h}),n?(e.each(n._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var s,n,o=i.call(arguments,1),a=0,r=o.length;a<r;a++)for(s in o[a])n=o[a][s],o[a].hasOwnProperty(s)&&void 0!==n&&(e.isPlainObject(n)?t[s]=e.isPlainObject(t[s])?e.widget.extend({},t[s],n):e.widget.extend({},n):t[s]=n);return t},e.widget.bridge=function(t,s){var n=s.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"==typeof o,r=i.call(arguments,1),l=this;return a?this.length||"instance"!==o?this.each(function(){var i,s=e.data(this,n);return"instance"===o?(l=s,!1):s?e.isFunction(s[o])&&"_"!==o.charAt(0)?(i=s[o].apply(s,r),i!==s&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'");
}):l=void 0:(r.length&&(o=e.widget.extend.apply(null,[o].concat(r))),this.each(function(){var t=e.data(this,n);t?(t.option(o||{}),t._init&&t._init()):e.data(this,n,new s(o,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(i,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,i){t._removeClass(i,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},s=t.split("."),t=s.shift(),s.length){for(n=a[t]=e.widget.extend({},this.options[t]),o=0;o<s.length-1;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var i,s,n;for(i in t)n=this.classesElementLookup[i],t[i]!==this.options.classes[i]&&n&&n.length&&(s=e(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function i(i,o){var a,r;for(r=0;r<i.length;r++)a=n.classesElementLookup[i[r]]||e(),a=e(t.add?e.unique(a.get().concat(t.element.get())):a.not(t.element).get()),n.classesElementLookup[i[r]]=a,s.push(i[r]),o&&t.classes[i[r]]&&s.push(t.classes[i[r]])}var s=[],n=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&i(t.keys.match(/\S+/g)||[],!0),t.extra&&i(t.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(t){var i=this;e.each(i.classesElementLookup,function(s,n){e.inArray(t.target,n)!==-1&&(i.classesElementLookup[s]=e(n.not(t.target).get()))})},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof e||null===e,o={extra:n?t:i,keys:n?e:t,element:n?this.element:e,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(t,i,s){var n,o=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,a){function r(){if(t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||e.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+o.eventNamespace,c=l[2];c?n.on(h,c,r):i.on(h,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(i).off(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,i,s){var n,o,a=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(e.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),a=!e.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){e(this)[t](),o&&o.call(s[0]),i()})}}),e.widget})},328:function(e,t,i){var s,n,o;!function(a){n=[i(35),i(93)],s=a,o="function"==typeof s?s.apply(t,n):s,!(void 0!==o&&(e.exports=o))}(function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})},344:function(e,t){"use strict";e.exports=["small","medium","large"]},347:function(e,t,i){"use strict";function s(e){var t=e.controller,i=e.user,s=e.button,r=e.file_input;if(!t)throw new Error("FileUpload requires a controller");if(!i)throw new Error("FileUpload requires a user");if(!s)throw new Error("FileUpload requires a button");if(!r)throw new Error("FileUpload requires a file_input");s.fileupload({url:"/i/upload",type:"POST",dataType:"json",fileInput:r,replaceFileInput:!1,paramName:"user_background",maxNumberOfFiles:1,maxFileSize:a,acceptFileTypes:"/(.|/)(gif|jpe?g|png)$/i",add:function(e,s){var n=s.originalFiles;if(n.length&&n[0].size&&n[0].size>a){var o=new Error;return o.type="file-too-large",void t.triggerMethod("upload:error",o)}t.triggerMethod("upload:start"),s.formData={email:i.get("email_address")},s.submit()},progress:function(e,i){t.triggerMethod("upload:progress",e,i)},done:function(e,s){var o=s.result,a=new n({url:o.url,source:"upload",width:o.width,height:o.height,active:!0}),r=i.get("images").where({active:!0});r.forEach(function(e){e.set("active",!1)}),i.get("images").add(a),a.save().done(function(){t.triggerMethod("upload:complete")}).fail(function(e){t.triggerMethod("upload:error",e)})},fail:function(e,i){var s=void 0;try{s=i._response.jqXHR.responseJSON}catch(e){o.captureException(e),s={type:"unspecified"}}t.triggerMethod("upload:error",s)}})}var n=i(232),o=i(25);i(1).create("file upload");i(138);var a=15e6;e.exports={applyFileUpload:s}},351:function(e,t,i){"use strict";var s=i(2),n=i(352),o=(i(1).create("signup"),s.CollectionView.extend({className:"chooser-list",childView:n,childViewEvents:{click:"onClickItem"},initialize:function(e){this.user=e.user},childViewOptions:function(){return{user:this.user}},onClickItem:function(e){var t=this.collection.findWhere({active:!0});t&&t.unset("active"),e.model.set("active",!0)}}));e.exports=o},352:function(e,t,i){"use strict";var s=i(4),n=i(187),o=n.render,a=i(627),r=i(318),l=i(16),h=i(2),c=i(821),u=i(51),d=i(630);i(1).create("chooser item");i(66);var p=h.View.extend({template:c,className:"chooser-item",initialize:function(e){var t=this;this.user=e.user,this.listenTo(this.model,"change:active",this.setActiveClass),this.listenTo(this.model,"change:color",this.renderProfile),this.listenTo(this.user,"change:layout.color",function(e,i){t.model.set("color",i)})},ui:{profile_container:".profile-container"},onAttach:function(){this.renderProfile()},renderProfile:function(){var e=this.model.toJSON(),t=this.user.toJSON();this.setActiveClass();var i=s.createElement(a,{globals:l,viewer:u.model.toJSON(),page:{},insertCss:d},s.createElement(r,{user:t,color:e.color,template_id:e.template_id,preview:!0,nested:!0}));o(i,this.ui.profile_container[0])},setActiveClass:function(){this.$el.toggleClass("active",!!this.model.get("active"))},triggers:{click:"click"}});e.exports=p},388:function(e,t,i){"use strict";var s=i(232),n=i(3),o=(i(1).create("placeholder"),i(107)),a=i(223),r=s.extend({defaults:{color:"blue",source:"fallback",url:o,width:300,height:200},initialize:function(){"gray"!==this.get("color")&&"grey"!==this.get("color")||this.set("url",a),this.setPlaceholderHighlight()},setPlaceholderHighlight:function(){var e=this.pick("width","height");if(n.isNumber(e.width)&&n.isNumber(e.height)){var t=Math.min(e.height,e.width),i=Math.round(t/2),s=i,o=(e.width-i)/2,a=0;this.set("highlight",{x:o,y:a,w:i,h:s})}}});e.exports=r},395:function(e,t){"use strict";!function(e){function t(t){function s(){t?a.removeData(t):d&&delete i[d]}function o(){l.id=setTimeout(function(){l.fn()},p)}var a,r=this,l={},h=t?e.fn:e,c=arguments,u=4,d=c[1],p=c[2],g=c[3];if("string"!=typeof d&&(u--,d=t=0,p=c[1],g=c[2]),t?(a=r.eq(0),a.data(t,l=a.data(t)||{})):d&&(l=i[d]||(i[d]={})),l.id&&clearTimeout(l.id),delete l.id,g)l.fn=function(e){"string"==typeof g&&(g=h[g]),g.apply(r,n.call(c,u))!==!0||e?s():o()},o();else{if(l.fn)return void 0===p?s():l.fn(p===!1),!0;s()}}var i={},s="doTimeout",n=Array.prototype.slice;e[s]=function(){return t.apply(window,[0].concat(n.call(arguments)))},e.fn[s]=function(){var e=n.call(arguments),i=t.apply(this,[s+e[0]].concat(e));return"number"==typeof e[0]||"number"==typeof e[1]?this:i}}(jQuery)},422:function(e,t,i){var s,n,o;!function(a){n=[i(35),i(328),i(93),i(206)],s=a,o="function"==typeof s?s.apply(t,n):s,!(void 0!==o&&(e.exports=o))}(function(e){var t=!1;return e(document).on("mouseup",function(){t=!1}),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,o=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&e(i.target).closest(this.options.cancel).length;return!(n&&!o&&this._mouseCapture(i))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return s._mouseMove(e)},this._mouseUpDelegate=function(e){return s._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(i){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&e.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,i.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})},603:function(e,t,i){"use strict";var s=i(2),n=i(3),o=i(643),a=i(641),r=i(770),l=(i(1).create("swatch view"),s.View.extend({styles:r,template:n.template('\n        <div class="swatches-container"></div>\n        <div class="shades-container"></div>\n    '),className:"swatches",regions:{colors:".swatches-container",shades:".shades-container"},initialize:function(e){this.user=e.user,this.color_collection=this.options.color_collection,this.shade_collection=this.options.shade_collection,this.simplified=this.options.simplified,this.listenTo(this.color_collection,"change:active",this.updateShades),this.listenTo(this.shade_collection,"change:active",this.onChangeShade)},onRender:function(){this.showColors(),this.setupShades()},showColors:function(){this.showChildView("colors",new o({user:this.user,collection:this.color_collection,shade_collection:this.shade_collection,simplified:this.simplified,shade_region:this.getRegion("shades")}))},setupShades:function(){if(!this.simplified){var e=this.color_collection.findWhere({active:!0});if(e&&!e.get("spectrum")){this.shade_collection.reset(e.get("shades"));var t=this.shade_collection.findWhere({id:this.user.get("layout.color")});t&&t.set("active",!0),this.showShades()}}},updateShades:function(){if(!this.simplified){var e=this.color_collection.findWhere({active:!0});e&&(e.get("spectrum")||(this.shade_collection.reset(e.get("shades")),this.showShades()))}},showShades:function(){var e=this.color_collection.findWhere({active:!0});e&&(e.get("spectrum")||this.showChildView("shades",new a({collection:this.shade_collection})))},onChangeShade:function(e,t,i){if(t){var s=e.get("id");this.user.get("layout").patch({color_theme_id:null,color:s.toUpperCase()})}}}));e.exports=l},639:function(e,t,i){"use strict";var s=i(3),n=i(2),o=i(109);i(49),i(802),i(800);var a=n.View.extend({className:function(){var e=["byoc"];return e.push("color-"+o(this.options.user.get("layout.color"))),e.join(" ")},template:s.template('\n        <div class="color-slider"></div>\n        <input type="text" class="input inline color-input" maxlength="7" value="#{{data.color}}">\n    '),ui:{slider:".color-slider",slider_handle:".ui-slider-handle",input:".color-input"},events:{"keyup @ui.input":"onChangeColorInput"},initialize:function(e){this.user=e.user,this.listenTo(this.user.get("layout"),"change:color",this.updateLuminance)},onAttach:function(){this.setupSlider()},setupSlider:function(){var e=this;this.ui.slider.slider({min:0,max:1,step:.002778,value:this.hexToHsl(this.model.get("color"))[0],slide:function(t,i){var s=e.hslToHex(i.value,.7,.5);e.setUiColors(s),e.onChangeColorSlider(s)}}),this.setUiColors()},onChangeColorSlider:function(e){this.ui.input.val("#"+e),this.model.batch({color_theme_id:null,color:e.toUpperCase()})},onChangeColorInput:function(){var e=this.ui.input.val().replace(/#/g,"");if(e.length<6&&3!==e.length)return"Too short.";3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=/^[0-9A-F]{6}$/i;return t.test(e)?(this.ui.slider.slider("option","value",this.hexToHsl(this.model.get("color"))[0]),this.model.batch({color_theme_id:null,color:e.toUpperCase()}),void this.setUiColors()):"Not a valid color."},setUiColors:function(e){var t=e;t||(t=this.model.get("color")),this.ui.input.css("background-color","#"+t),this.$(".ui-slider-handle").css("background-color","#"+t)},hexToHsl:function(e){var t=parseInt(e.substring(0,2),16),i=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16);t/=255,i/=255,s/=255;var n=Math.max(t,i,s),o=Math.min(t,i,s),a=void 0,r=n,l=n-o,h=0===n?0:l/n;if(n===o)a=0;else{switch(n){case t:a=(i-s)/l+(i<s?6:0);break;case i:a=(s-t)/l+2;break;case s:a=(t-i)/l+4}a/=6}return[a,h,r]},hslToHex:function(e,t,i){var s=void 0,n=void 0,o=void 0;if(0===t)s=n=o=i;else{var a=function(e,t,i){var s=i;return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+6*(t-e)*s:s<.5?t:s<2/3?e+(t-e)*(2/3-s)*6:e},r=i<.5?i*(1+t):i+t-i*t,l=2*i-r;s=a(l,r,e+1/3),n=a(l,r,e),o=a(l,r,e-1/3)}var h=[Math.round(255*s).toString(16),Math.round(255*n).toString(16),Math.round(255*o).toString(16)],c=[];return h.forEach(function(e){c.push(1===e.length?"0"+e:e)}),c.join("").toUpperCase()},updateLuminance:function(){this.$el.addPrefixedClass("color",o(this.user.get("layout.color")))}});e.exports=a},640:function(e,t,i){"use strict";var s=i(19),n=i(2),o=(i(1).create("shade item"),n.View.extend({tagName:"li",className:function(){return s("shade",this.model.pick("active"))},attributes:function(){return{style:"background-color: #"+this.model.get("id")}},template:function(){return""},initialize:function(){this.listenTo(this.model,"change:active",this.setActiveClass)},setActiveClass:function(){this.$el.toggleClass("active",!!this.model.get("active"))},triggers:{click:"click"}}));e.exports=o},641:function(e,t,i){"use strict";var s=i(2),n=i(640),o=s.CollectionView.extend({tagName:"ul",className:"shades",childView:n,childViewEvents:{click:"onClickItem"},onClickItem:function(e){var t=this.collection.findWhere({active:!0});t&&t.unset("active"),e.model.set("active",!0)}});e.exports=o},642:function(e,t,i){"use strict";var s=i(19),n=i(2),o=(i(1).create("swatch item"),n.View.extend({className:function(){return s("colorswatch",this.model.pick("active","spectrum"))},attributes:function(){return{style:"background-color: #"+this.model.get("swatch")}},template:function(){return""},initialize:function(){this.listenTo(this.model,"change:active",this.setActiveClass)},setActiveClass:function(){this.$el.toggleClass("active",!!this.model.get("active"))},triggers:{click:"click"}}));e.exports=o},643:function(e,t,i){"use strict";var s=i(3),n=i(13),o=i(2),a=i(642),r=i(639),l=(i(1).create("swatch list"),o.CollectionView.extend({className:"swatch-list",childView:a,childViewEvents:{click:"onClickItem"},events:{"click .spectrum":"onByocClick"},initialize:function(e){this.user=e.user,this.shade_region=e.shade_region,this.simplified=e.simplified,this.shade_collection=e.shade_collection,this.simplified||this.addByoc(),this.ensureColor(),this.setActiveSwatch()},onRender:function(){this.checkSwatchStatus()},addByoc:function(){this.collection.add(new n.Model({spectrum:!0}))},onByocClick:function(){var e=this.shade_collection.findWhere({active:!0});e&&e.unset("active");var t=this.collection.findWhere({active:!0});t&&t.unset("active"),this.showByoc()},showByoc:function(){var e=this.collection.findWhere({spectrum:!0});e&&(e.set("active",!0),this.shade_region.show(new r({user:this.user,model:this.user.get("layout")})))},ensureColor:function(){if(!this.user.get("layout.color")){var e=this.collection.first();this.user.get("layout").batch("color",e.get("swatch"))}},setActiveSwatch:function(){var e=this.user.get("layout.color"),t=this.collection.findWhere({swatch:e.toUpperCase()});t||this.simplified||this.collection.forEach(function(i){var n=s.findWhere(i.get("shades"),{id:e.toUpperCase()});n&&(t=i)});var i=this.collection.findWhere({spectrum:!0});!t&&i&&(t=i),t&&t.set("active",!0)},checkSwatchStatus:function(){var e=this.collection.findWhere({active:!0});e&&e.get("spectrum")&&this.showByoc()},onClickItem:function(e){var t=this.shade_collection.findWhere({active:!0});t&&t.unset("active");var i=this.collection.findWhere({active:!0});i&&i.unset("active"),e.model.set("active",!0),this.changeColor(e.model)},changeColor:function(e){if(e.get("spectrum"))return void this.onByocClick();var t=e.get("swatch");this.user.get("layout").patch({color_theme_id:null,color:t.toUpperCase()})}}));e.exports=l},646:function(e,t,i){"use strict";var s=i(13),n=i(2),o=i(26),a=i(3),r=i(11),l=i(16),h=i(112),c=i(647),u=i(59),d=i(388),p=i(57),g=i(18),f=i(824),m=i(773),v=i(24),_=i(159),w=i(17),y=i(347),x=i(1).create("photo");i(395);var b=!1,C=50,M=n.View.extend({template:f,styles:[v,m],templateContext:function(){var e=this.user.get("images").findWhere({active:!0})||new d;return{is_touch:o.is("touch"),user:this.user.serialize(),image:e.serialize()}},behaviors:{DestroyOnEscape:w.config()},initialize:function(e){this.user=e.user,a.bindAll(this,"setCropSize","getFaceData","handleFaceData","faceDetectError","showQuadrant","onSaveHighlightError","setupHighlightHandling","onOrientationChange"),this.listenTo(this.user.get("images"),"add",this.onAddImage),r.window.on("resize."+this.cid+" orientationchange."+this.cid,this.onOrientationChange)},regions:{content:".edit-content",previews:".previews"},ui:{back:".back",instructions:".instructions",image_section:"section.image",image:".image img",crop_marker:".crop-marker",upload_button:".upload-button",file_input:".upload-input"},events:{"click @ui.upload_button":"onClickUploadButton","click @ui.back":"destroy","click @ui.image":"handleCropClick","click @ui.file_input":"onClickFileInput","touchstart @ui.crop_marker":"startTouch","touchmove @ui.crop_marker":"capturePinchCoordinates","touchend @ui.crop_marker":"stopScaling"},setImagePreviews:function(){var e=new s.Model({square:this.user.getImgixUrl({width:70,height:70}),share:this.user.getImgixUrl({width:140,height:70}),rect:this.user.getImgixUrl()}),t=new c({user:this.user,model:e});this.showChildView("previews",t)},onAddImage:function(){var e=this.user.get("images").findWhere({active:!0});e&&this.ui.upload_button.find(".default-text").text("Change Photo")},onRender:function(){var e=this;this.initializeFileUpload();var t=this.user.get("images").findWhere({active:!0});t&&(t.hasDims()?this.setupHighlightHandling():_(t.get("url")).then(function(i){t.set({width:i.width,height:i.height},{silent:!0}),e.setupHighlightHandling()}))},initializeFileUpload:function(){y.applyFileUpload({controller:this,user:this.user,button:this.ui.upload_button,file_input:this.ui.file_input})},setupHighlightHandling:function(){var e=this,t=this.user.get("images").findWhere({active:!0});this.setImagePreviews(),this.listenTo(t,"change:highlight",this.setImagePreviews),t.hasHighlight()?this.ui.image.on("load readystatechange",function(){e.showQuadrant()}):this.getFaceData()},onClickFileInput:function(e){e.stopPropagation()},onClickUploadButton:function(){this.ui.file_input.eq(0).trigger("click")},onUploadStart:function(){this.detachChildView("previews"),this.ui.instructions.hide(),this.showProgressBar(),this.ui.upload_button.addClass("disabled").attr("disabled",!0)},onUploadComplete:function(){var e=this;this.render(),this.ui.image.on("load readystatechange",function(){e.getFaceData()})},showProgressBar:function(){this.progress_model=new s.Model({text:"Uploading your photo",percent:0}),this.showChildView("content",new h({model:this.progress_model}))},onUploadProgress:function(e,t){if(this.progress_model){var i=t.loaded/t.total*100;x("data.loaded",t.loaded),x("data.total",t.total),x(i),this.progress_model.set("percent",i)}},onUploadError:function(e){var t=void 0;switch(e&&e.type){case"file-too-large":t="Please upload a photo smaller than 15mb.";break;case"invalid-image":t="Please upload a photo using PNG, GIF, or JPG file type.";break;case"image-not-rgb":t="We do not accept CMYK photos. Please upload a photo that is in RGB color mode.";break;default:t=e&&e.message||"An error occurred. Please try another image."}this.render(),g.banner(t,{status:"warning"})},onOrientationChange:function(){this.ui.crop_marker.removeClass("show"),this.showResizedQuadrant()},showResizedQuadrant:a.debounce(function(){this.showQuadrant()},500),_scaling:!1,_dragging:!1,_pinch_coordinates:[],startTouch:function(e){var t=e.originalEvent;t.touches.length>2||(e.preventDefault(),2===t.touches.length&&(this._scaling=!0),1===t.touches.length&&(this._dragging=!0),this.capturePinchCoordinates(e))},capturePinchCoordinates:function(e){if(this._scaling||this._dragging){var t=e.originalEvent;this._pinch_coordinates=t.touches,this._scaling&&this.getDistance(),this._dragging&&(this.setCropSize(),this.setQuadrant({pageX:this._pinch_coordinates[0].pageX,pageY:this._pinch_coordinates[0].pageY}))}},getDistance:a.throttle(function(){var e=this._pinch_coordinates,t=Math.sqrt((e[0].pageX-e[1].pageX)*(e[0].pageX-e[1].pageX)+(e[0].pageY-e[1].pageY)*(e[0].pageY-e[1].pageY));this.setCropSize(t)},100),stopScaling:function(e){(this._scaling||this._dragging)&&(this._scaling=!1,this._dragging=!1)},setCropSize:function(e){var t=this.user.get("images").findWhere({active:!0});if(t&&!this.isDestroyed()){if(t.get("highlight.w")&&!e)return void this.setQuadrant();var i=this.ui.image.bounds(),s=i.width,n=i.height;s=n=Math.min(n,s),e=s/2,e&&(s=n=Math.max(C,Math.min(e,s))),t.set({"highlight.w":s/i.width*t.get("width"),"highlight.h":n/i.height*t.get("height")})}},handleCropClick:function(e){var t=this.user.get("images").findWhere({active:!0});t&&(b=!1,t.unset("highlight.w"),t.unset("highlight.h"),this.setCropSize(),this.setQuadrant(e))},getSanitizedQuadrant:function(e,t){return{x:Math.max(0,Math.min(e.x,t.width-e.w)),y:Math.max(0,Math.min(e.y,t.height-e.h))}},setQuadrant:function(e){var t=this.user.get("images").findWhere({active:!0});if(t&&!this.isDestroyed()){var i=this.ui.image.bounds(),s=this.ui.image_section.bounds(),n=void 0,o=void 0;a.isUndefined(t.get("hightlight.x"))&&a.isUndefined(e)?(n=Math.abs(parseFloat(i.width/2)),o=Math.abs(parseFloat(i.height/2))):(n=e.pageX-this.ui.image_section.offset().left-Math.max(0,(s.width-i.width)/2),o=e.pageY-this.ui.image_section.offset().top);var r=t.get("highlight.w")/t.get("width")*i.width,l=t.get("highlight.h")/t.get("height")*i.height,h={x:n-r/2,y:o-l/2,w:r,h:l},c=this.getSanitizedQuadrant(h,i);t.set({"highlight.x":c.x/i.width*t.get("width"),"highlight.y":c.y/i.height*t.get("height")}),this.saveHighlight(),this.showQuadrant()}},showQuadrant:function(){if(!this.isDestroyed()){var e=this.user.get("images").findWhere({active:!0});if(e&&!this.isDestroyed()){var t=e.get("highlight.w")/e.get("width"),i=e.get("highlight.h")/e.get("height"),s=e.get("highlight.x")/e.get("width"),n=e.get("highlight.y")/e.get("height"),o=this.ui.image.bounds(),a=this.ui.image_section.bounds();this.ui.crop_marker.css({width:o.width*t,height:o.height*i,top:o.height*n,left:o.width*s+Math.max(0,(a.width-o.width)/2)}).addClass("show")}}},isValid:function(){var e=this.user.get("images").findWhere({active:!0});return!!e},saveHighlight:a.debounce(function(){var e=this.user.get("images").findWhere({active:!0});e&&e.patch({width:e.get("width"),height:e.get("height"),highlight:e.get("highlight").toJSON()}).done(function(){}).fail(this.onSaveHighlightError)},100),onSaveHighlightError:function(e){switch(e.type){case u.NO_ITEM_WITH_THAT_ID:throw new Error(e.type);default:p(e)}},getFaceData:function(){var e=this,t=this.user.get("images").findWhere({active:!0});if(t&&!b){var i=t.get("url"),s=l.NODE_API+"/internal/facedetection?url="+i;r.getJSON(s,this.handleFaceData).fail(this.faceDetectError),b=!0,r.doTimeout("facedetectimage",2500,function(){e.faceDetectError()})}},handleFaceData:function(e){if(r.doTimeout("facedetectimage"),b){b=!1;var t=this.user.get("images").findWhere({active:!0});if(e.faces.length){x("fd faces found",e.faces.length);var i=a.max(e.faces,function(e){return e.w}),s=i.w,n=Math.min(t.get("width"),t.get("height"));i.w=i.h=Math.min(n,i.w+.1*n),i.w=i.h=Math.max(.3*n,i.w);var o=(i.w-s)/2;i.x=i.x-o,i.y=i.y-o;var l={width:t.get("width"),height:t.get("height")},h=this.getSanitizedQuadrant(i,l);i.x=h.x,i.y=h.y,t.set("highlight",i),this.saveHighlight(),this.showQuadrant()}else x("fd no faces found"),t.setAutoHighlight(),this.setCropSize()}},faceDetectError:function(e){if(b){b=!1,e=e||"timeout",x("fd error",e);var t=this.user.get("images").findWhere({active:!0});t.setAutoHighlight(),this.setCropSize()}},onBeforeDestroy:function(){r.window.off("."+this.cid)}});e.exports=M},647:function(e,t,i){"use strict";var s=i(2),n=i(825),o=s.View.extend({template:n,className:"pad-horizontal pad-top"});e.exports=o},724:function(e,t,i){t=e.exports=i(6)(),t.push([e.id,".swatches-scope-3AJN1{margin-top:20px;margin-left:auto;margin-right:auto;max-width:380px}.swatches-scope-3AJN1 .swatch-list{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;box-sizing:border-box}.swatches-scope-3AJN1 .swatch-list .colorswatch{width:38px;height:38px;border-radius:50%;cursor:pointer;overflow:hidden;box-shadow:inset 0 0 0 1px hsla(0,0%,100%,.2);transition:all .15s ease-out}.no-touchevents .swatches-scope-3AJN1 .swatch-list .colorswatch:not(.active):hover{box-shadow:inset 0 0 0 1px rgba(0,0,0,.1),0 0 0 2px #fff,0 0 0 3px rgba(0,0,0,.3)}.swatches-scope-3AJN1 .swatch-list .colorswatch.active{cursor:default;box-shadow:inset 0 0 0 1px rgba(0,0,0,.1),0 0 0 4px #fff,0 0 0 5px rgba(0,0,0,.7)}.swatches-scope-3AJN1 .swatch-list .colorswatch.spectrum{background-image:url("+i(755)+");background-repeat:no-repeat;background-size:100% 100%}@media only screen and (max-width:400px){.swatches-scope-3AJN1 .swatch-list .colorswatch{width:32px;height:32px}}.swatches-scope-3AJN1 .shades{margin-top:20px;width:100%;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;box-sizing:border-box}.swatches-scope-3AJN1 .shades .shade{width:55px;height:25px;border-radius:3px;box-shadow:inset 0 0 0 1px hsla(0,0%,100%,.2);cursor:pointer;transition:all .15s ease-out}.no-touchevents .swatches-scope-3AJN1 .shades .shade:not(.active):hover{box-shadow:inset 0 0 0 1px rgba(0,0,0,.1),0 0 0 1px #fff,0 0 0 2px rgba(0,0,0,.3)}.swatches-scope-3AJN1 .shades .shade.active{cursor:default;box-shadow:inset 0 0 0 1px rgba(0,0,0,.1),0 0 0 3px #fff,0 0 0 4px rgba(0,0,0,.3)}@media only screen and (max-width:400px){.swatches-scope-3AJN1 .shades .shade{width:50px;height:23px}}.swatches-scope-3AJN1 .byoc{margin-top:20px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.swatches-scope-3AJN1 .byoc .color-slider{margin-left:4px;width:75%;height:25px;border-radius:3px;box-shadow:inset 0 0 0 1px hsla(0,0%,100%,.2);background:linear-gradient(90deg,#d92626 0,#d9d926 17%,#26d926 33%,#26d9d9 50%,#2626d9 67%,#d926d9 83%,#d92626);position:relative}.swatches-scope-3AJN1 .byoc .color-slider .ui-slider-handle{position:absolute;height:29px;border-radius:5px;border:1px solid #fff;box-shadow:0 0 0 1px rgba(0,0,0,.3);width:15px;margin-left:-9px;top:-3px}.swatches-scope-3AJN1 .byoc .input{margin:0;width:20%;height:25px;line-height:25px;font-size:13px;border:none;color:#fff;box-shadow:inset 0 0 0 1px hsla(0,0%,100%,.2)}.color-light .swatches-scope-3AJN1 .byoc .input{color:#333}@media only screen and (max-width:400px){.swatches-scope-3AJN1 .byoc .color-slider{width:70%;height:23px}.swatches-scope-3AJN1 .byoc .input{width:25%;height:23px}}",""]),
t.locals={scope:"swatches-scope-3AJN1"}},727:function(e,t,i){t=e.exports=i(6)(),t.push([e.id,".photo-scope-1rKaC .user-image .image{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;overflow:hidden}.photo-scope-1rKaC .user-image .image img{max-width:100%;max-height:360px;display:block;margin:auto}.photo-scope-1rKaC .user-image{display:block;overflow:hidden}.photo-scope-1rKaC .crop-marker{border:1px solid #fff;box-sizing:border-box;position:absolute;z-index:2;display:none;box-shadow:inset 0 0 6px 2px rgba(0,0,0,.2),0 0 1px hsla(0,0%,100%,.8);transition:all .2s ease-out;border-radius:50%}.no-touchevents .photo-scope-1rKaC .crop-marker{pointer-events:none}.photo-scope-1rKaC .progress{margin-top:70px;margin-bottom:80px;padding:0 40px;text-align:center}.photo-scope-1rKaC .crop-marker.show{display:block}.photo-scope-1rKaC .upload-button{position:relative;overflow:hidden}.photo-scope-1rKaC .upload-input{position:absolute;top:0;right:0;height:100%;width:auto;opacity:0;font-size:10000px;cursor:pointer!important}.photo-scope-1rKaC .instructions{font-size:13px;text-align:center}.photo-scope-1rKaC .previews>div{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.photo-scope-1rKaC .previews>div img{width:70px;height:70px;background-color:#555}.photo-scope-1rKaC .previews>div img:first-child{width:105px}.photo-scope-1rKaC .previews>div img:nth-child(2){border-radius:35px}.photo-scope-1rKaC .previews>div img:nth-child(3){width:140px}@media only screen and (max-width:380px){.photo-scope-1rKaC .previews>div{-ms-flex-pack:distribute;justify-content:space-around}.photo-scope-1rKaC .previews>div img{width:50px;height:50px}.photo-scope-1rKaC .previews>div img:first-child{width:75px}.photo-scope-1rKaC .previews>div img:nth-child(2){border-radius:25px}.photo-scope-1rKaC .previews>div img:nth-child(3){width:100px}}",""]),t.locals={scope:"photo-scope-1rKaC"}},755:function(e,t,i){e.exports=i.p+"z/6cde223b.jpg"},770:function(e,t,i){var s=i(724),n=i(7);"string"==typeof s&&(s=[[e.id,s,""]]),e.exports=s.locals||{},e.exports._getContent=function(){return s},e.exports._getCss=function(){return s.toString()},e.exports._insertCss=function(e){return n(s,e)}},773:function(e,t,i){var s=i(727),n=i(7);"string"==typeof s&&(s=[[e.id,s,""]]),e.exports=s.locals||{},e.exports._getContent=function(){return s},e.exports._getCss=function(){return s.toString()},e.exports._insertCss=function(e){return n(s,e)}},800:function(e,t){!function(e){function t(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var i=e.originalEvent.changedTouches[0],s=document.createEvent("MouseEvents");s.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(s)}}if(e.support.touch="ontouchend"in document,e.support.touch){var i,s=e.ui.mouse.prototype,n=s._mouseInit,o=s._mouseDestroy;s._touchStart=function(e){var s=this;!i&&s._mouseCapture(e.originalEvent.changedTouches[0])&&(i=!0,s._touchMoved=!1,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},s._touchMove=function(e){i&&(this._touchMoved=!0,t(e,"mousemove"))},s._touchEnd=function(e){i&&(t(e,"mouseup"),t(e,"mouseout"),this._touchMoved||t(e,"click"),i=!1)},s._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),n.call(t)},s._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),o.call(t)}}}(jQuery)},802:function(e,t,i){var s,n,o;!function(a){n=[i(35),i(422),i(801),i(93),i(206)],s=a,o="function"==typeof s?s.apply(t,n):s,!(void 0!==o&&(e.exports=o))}(function(e){return e.widget("ui.slider",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,s=this.options,n=this.element.find(".ui-slider-handle"),o="<span tabindex='0'></span>",a=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),t=n.length;t<i;t++)a.push(o);this.handles=n.add(e(a.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=e("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var i,s,n,o,a,r,l,h,c=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-c.values(t));(n>i||n===i&&(t===c._lastChangedValue||c.values(t)===u.min))&&(n=i,o=e(this),a=t)}),r=this._start(t,a),r!==!1&&(this._mouseSliding=!0,this._handleIndex=a,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),l=o.offset(),h=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=h?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,n,o;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),s<0&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),o=this._valueMin()+s*n,this._trimAlignValue(o)},_uiHash:function(e,t,i){var s={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(s.value=void 0!==t?t:this.values(e),s.values=i||this.values()),s},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,i){var s,n,o=this.value(),a=this.values();this._hasMultipleValues()&&(n=this.values(t?0:1),o=this.values(t),2===this.options.values.length&&this.options.range===!0&&(i=0===t?Math.min(n,i):Math.max(n,i)),a[t]=i),i!==o&&(s=this._trigger("slide",e,this._uiHash(t,i,a)),s!==!1&&(this._hasMultipleValues()?this.values(t,i):this.value(i)))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var s,n,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this._hasMultipleValues()?this._values(t):this.value();for(s=this.options.values,n=arguments[0],o=0;o<s.length;o+=1)s[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,i){var s,n=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),this._super(t,i),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=n-1;s>=0;s--)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this._hasMultipleValues()){for(i=this.options.values.slice(),s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step,s=Math.round((e-t)/i)*i;e=s+t,e>this.options.max&&(e-=i),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return i===-1?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,i,s,n,o,a=this.options.range,r=this.options,l=this,h=!this._animateOff&&r.animate,c={};this._hasMultipleValues()?this.handles.each(function(s){i=(l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[h?"animate":"css"](c,r.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===s&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(s=this.value(),n=this._valueMin(),o=this._valueMax(),i=o!==n?(s-n)/(o-n)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](c,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:100-i+"%"},r.animate),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:100-i+"%"},r.animate))},_handleEvents:{keydown:function(t){var i,s,n,o,a=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(e(t.target),null,"ui-state-active"),i=this._start(t,a),i===!1))return}switch(o=this.options.step,s=n=this._hasMultipleValues()?this.values(a):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-o)}this._slide(t,a,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),this._removeClass(e(t.target),null,"ui-state-active"))}}})})},821:function(e,t,i){i(5);e.exports=function(e){var t="";Array.prototype.join;return t+='<div class="card">\n    <div class="profile-container"></div>\n</div>\n'}},824:function(e,t,i){var s=i(5);e.exports=function(e){var t,i="";Array.prototype.join;return i+='<section class="edit-pane-header">\n    <div class="back glyph-center glyph-angle-left"></div>\n    <h1>Photo</h1>\n</section>\n\n<section class="edit-pane-content edit-pane-scroller rule-top">\n    ',"fallback"!==e.image.source&&(i+='\n        <section class="instructions pad-vertical pad-horizontal">\n            <p>'+(null==(t=e.is_touch?"Tap":"Click")?"":s.escape(t))+" to highlight the important part of the image.</p>\n        </section>\n    "),i+='\n    <section class="edit-content user-image">\n        <section class="image">\n            <span class="crop-marker"></span>\n            <img src="'+(null==(t=e.image.url)?"":t)+'" draggable="false">\n            ',"fallback"===e.image.source&&(i+='\n                <input type="file" class="upload-input" tabindex="-1">\n            '),i+='\n        </section>\n    </section>\n    <section class="previews"></section>\n    <section class="edit-actions pad-horizontal pad-vertical">\n        <button type="button" class="button upload-button large dark primary">\n            <span class="default-text">\n                ',i+="fallback"===e.image.source?"\n                    Add a Photo\n                ":"\n                    Change Photo\n                ",i+='\n            </span>\n            <span class="loading-text">Uploading</span>\n            <input type="file" class="upload-input" tabindex="-1">\n        </button>\n    </section>\n</section>\n'}},825:function(e,t,i){i(5);e.exports=function(e){var t,i="";Array.prototype.join;return i+='<img src="'+(null==(t=e.rect)?"":t)+'" title="This is how your photo will look in your about.me Email Signature." draggable="false">\n<img src="'+(null==(t=e.square)?"":t)+'" title="This is how your photo will look on about.me Discover pages." draggable="false">\n<img src="'+(null==(t=e.share)?"":t)+'" title="This is how your photo will look when your page is shared on Twitter and Facebook." draggable="false">\n'}},964:function(e,t){e.exports="/* data.model.width */\n/* data.model.height */\n\n.edit-pane-design .chooser-list {\n    min-height: [[ data.model.height ]]px;\n}\n\n.edit-pane-design .chooser-item:first-child {\n    margin-left: [[ data.model.pad ]]px;\n}\n.edit-pane-design .chooser-item:last-child {\n    margin-right: [[ data.model.pad ]]px;\n}\n\n.edit-pane-design .chooser-item .card {\n    width: [[ data.model.item_width ]]px;\n    height: [[ data.model.item_height ]]px;\n}\n\n.edit-pane-design .chooser-item .card .profile-container {\n    width: [[ data.model.template_width ]]px;\n    -o-transform: scale([[ data.model.item_width / data.model.template_width ]]);\n    -moz-transform: scale([[ data.model.item_width / data.model.template_width ]]);\n    -webkit-transform: scale([[ data.model.item_width / data.model.template_width ]]);\n    transform: scale([[ data.model.item_width / data.model.template_width ]]);\n}\n.edit-pane-design .chooser-item .card .profile {\n    width: [[ data.model.template_width ]]px;\n    min-height: [[ data.model.template_width * data.model.ratio ]]px;\n}\n.edit-pane-design .chooser-item .card .profile.large .image {\n    height: [[ data.model.template_width * data.model.ratio ]]px;\n}\n"},1060:function(e,t,i){"use strict";var s=i(2),n=i(11),o=i(2038),a=i(24),r=i(646),l=i(1079),h=i(17),c=i(50),u=i(55),d=i(25),p=(i(1).create("editpanel"),{photo:function(e){e({viewClass:r,viewOptions:{user:this.user}})},design:function(e){e({viewClass:l,viewOptions:{user:this.user}})}}),g=s.View.extend({template:o,styles:a,behaviors:{DestroyOnEscape:h.config()},initialize:function(e){this.user=e.user,this.initializeRouter()},initializeRouter:function(){this.router=new u({controller:this,scope:this.user.get("user_name")+"/edit/appearance",appRoutes:{":section(/)(*params)":"showSection"}})},onBeforeDestroy:function(){this.router.destroy()},ui:{back:".back",drilldown_links:".editlinks li[data-drilldown]"},events:{"click @ui.drilldown_links":"onClickItem","click @ui.back":"destroy"},onClickItem:function(e){e.preventDefault();var t=n(e.target).closest("li").data("drilldown");this.showSection(t)},showSection:function(e){var t=this;this.showDrilldown(new c({styles:a})),this.getSection(e,function(i){var s=i.viewClass,n=i.viewOptions,o=void 0===n?{}:n;t.child_view=new s(o),t.listenTo(t.child_view,"drillup",function(e){t.router.navigate("",{force:!0,replace:!0})}),t.showDrilldown(t.child_view),t.router.navigate(e,{replace:!0})})},getSection:function e(t,i){var e=p[t];e?e.call(this,i):d.captureMessage("Edit panel section not found",{extra:{section_name:t}})}});e.exports=g},1079:function(e,t,i){"use strict";var s=i(3),n=i(13),o=i(2),a=i(603),r=i(1080),l=i(1081),h=i(312),c=i(342),u=i(17),d=i(2055),p=i(1681),g=i(24),f=i(344),m=i(322),v=(i(1).create("editpanel"),o.View.extend({template:d,styles:[g,p],className:"edit-pane-design",behaviors:function e(){var e={DestroyOnEscape:u.config()};return e},initialize:function(e){this.user=e.user;var t=this.user.get("layout.color_theme_id"),i=s.findWhere(h,{id:t});i&&this.user.set("layout.color",i.swatch),this.initializeColorCollection(),this.initializeDesignCollection(),this.listenTo(m,"change:small",this.showDesigns)},initializeColorCollection:function(){var e=c.map(function(e){return{shades:e.shades,swatch:e.swatch}});this.color_collection=new n.Collection(e),this.shade_collection=new n.Collection},initializeDesignCollection:function(){var e=this,t=f.map(function(t){return{user:e.user,template_id:t}});this.design_collection=new n.Collection(t);var i=this.user.get("layout.template_id"),s=this.design_collection.findWhere({template_id:i});if(!s)throw new Error("Unable to get item for template_id "+i);s.set("active",!0),this.listenTo(this.design_collection,"change:active",this.onChangeDesign)},regions:{colors:".colors-container",designs:".designs-container"},ui:{back:".back"},events:{"click @ui.back":"destroy"},onRender:function(){this.showSwatches(),this.showDesigns()},showSwatches:function(){this.showChildView("colors",new a({user:this.user,shade_collection:this.shade_collection,color_collection:this.color_collection}))},showDesigns:function(){var e=r;m.is("small")&&(e=l),this.showChildView("designs",new e({user:this.user,template:s.template('<div class="chooser hide-scrollbar"></div>'),collection:this.design_collection}))},onChangeDesign:function(e,t,i){t&&this.user.get("layout").batch("template_id",e.get("template_id"))}}));e.exports=v},1080:function(e,t,i){"use strict";var s=i(2),n=i(3),o=i(11),a=i(21),r=i(351),l=i(964),h=i(131);i(66);var c=i(1).create("layout1","design"),u=s.View.extend({className:"desktop-chooser",behaviors:function e(){var e={};return this.model=new a({template_width:1e3,constrain:!1,ratio:.6667,opacity:0,width:0,height:0},{calculated_values:{pad:function(){return 0},item_width:function(){if(!this.get("constrain"))return this.get("width");var e=this.get("item_height"),t=this.get("ratio");return e/t},item_height:function e(){if(!this.get("constrain"))return this.get("width")*this.get("ratio");var t=this.get("width"),i=this.get("height")-100,s=this.get("ratio"),e=i/3;e=Math.max(e,100);var n=e/s;return n>t&&(e=t*s),e}}}),e.Css={behaviorClass:h,label:"chooser",template:l,templateData:{model:this.model}},e},initialize:function(e){this.user=e.user,this.collection=this.options.collection,n.bindAll(this,"showOpacity","onWindowResize"),this.showOpacity=n.debounce(this.showOpacity,200),o.window.on("resize."+this.cid+" orientationchange."+this.cid,n.debounce(this.onWindowResize,500))},onBeforeDestroy:function(){o.window.off("."+this.cid)},onWindowResize:function(){c("onWindowResize"),this.setDimensions()},regions:{chooser:".chooser"},ui:{chooser:".chooser"},onRender:function(){this.chooser_list_view=new r({user:this.user,collection:this.collection}),this.showChildView("chooser",this.chooser_list_view)},onAttach:function(){this.setDimensions()},getActiveItem:function(){var e=this.collection.findWhere({active:!0});if(!e)throw new Error("Unable to get active item");return e},setDimensions:function(){if(!this.isDestroyed()){var e=this.ui.chooser.bounds(),t=e.width,i=o.window.height(),s=i-e.top;this.model.set({width:t,height:s}),c("dimensions",this.model.toJSON()),this.showOpacity()}},showOpacity:function(){this.model.set("opacity",1)}});e.exports=u},1081:function(e,t,i){"use strict";var s=i(2),n=i(3),o=i(11),a=i(21),r=i(351),l=i(964),h=i(131);i(1).create("editpanel","design");i(66);var c=s.View.extend({className:"mobile-chooser",behaviors:function e(){var e={};return this.model=new a({scroll_left:0,template_width:380,ratio:16/9,width:0,height:0},{calculated_values:{pad:function e(){var t=this.get("width"),i=this.get("item_width"),e=(t-i)/2;return e},item_width:function e(){var t=this.get("width"),i=this.get("height")-120,s=this.get("ratio");if(!t)return 0;var e=t/1.5,n=e*s;return n>i&&(e=i/s),e},item_height:function(){var e=this.get("item_width"),t=this.get("ratio");return e*t}}}),e.Css={behaviorClass:h,label:"chooser",template:l,templateData:{model:this.model}},e},initialize:function(e){var t=this;this.user=e.user,this.collection=e.collection,n.bindAll(this,"onWindowResize","scrollToActiveItem"),o.window.on("resize."+this.cid,n.debounce(this.onWindowResize,500)),this.listenTo(this.collection,"change:active",function(){t.scrollToActiveItem({animate:!0})})},onBeforeDestroy:function(){o.window.off("."+this.cid)},onWindowResize:function(){this.setDimensions()},ui:{chooser:".chooser"},regions:{chooser:".chooser"},onRender:function(){this.chooser_list_view=new r({user:this.user,collection:this.collection}),this.showChildView("chooser",this.chooser_list_view)},onAttach:function(){this.setDimensions(),n.delay(this.scrollToActiveItem,500)},setDimensions:function(){if(!this.isDestroyed()){var e=this.$el.bounds();this.model.set({width:e.width,height:e.height})}},scrollToActiveItem:function(e){if(!this.isDestroyed()){var t=this.collection.findWhere({active:!0});if(t){var i=this.chooser_list_view.children.findByModel(t);this.scrollToItem(i.$el,e)}}},scrollToItem:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isDestroyed()){n.defaults(i,{animate:!0});var s=e.bounds(),a=(o.window.width()-s.width)/2,r=this.ui.chooser.scrollLeft(),l=s.left-a+r;this.scrolling_to_item=!0,i.animate?this.ui.chooser.animate({scrollLeft:l},250):this.ui.chooser.scrollLeft(l),n.delay(function(){t.scrolling_to_item=!1},500)}}});e.exports=c},1435:function(e,t,i){t=e.exports=i(6)(),t.push([e.id,".design-scope-EI3Ht .swatches{margin-top:0}.design-scope-EI3Ht .chooser{margin-left:20px;margin-right:20px;-webkit-overflow-scrolling:touch}.design-scope-EI3Ht .chooser-list{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:start;box-sizing:border-box;margin-top:10px;margin-bottom:20px}.design-scope-EI3Ht .chooser-item{box-sizing:border-box;-webkit-box-flex:0;-ms-flex:none;flex:none;margin-top:20px}.design-scope-EI3Ht .chooser-item .card{overflow:hidden;border-radius:5px;box-shadow:0 0 0 1px rgba(0,0,0,.3),0 2px 10px 0 rgba(0,0,0,.7);cursor:pointer;transition:width .1s ease-in-out,height .1s ease-in-out}.design-scope-EI3Ht .chooser-item.active .card{border-radius:1px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.2),0 0 0 2px #fff,0 0 1px 5px #0872b4}.design-scope-EI3Ht .chooser-item .card .profile-container{-webkit-transform-origin:left top;transform-origin:left top}.design-scope-EI3Ht .desktop-chooser{display:block}.design-scope-EI3Ht .mobile-chooser{display:none}@media only screen and (max-width:640px){.design-scope-EI3Ht .desktop-chooser{display:none}.design-scope-EI3Ht .mobile-chooser{display:block}.design-scope-EI3Ht .chooser{margin:0;position:relative;box-sizing:border-box;overflow-x:auto;overflow-y:hidden;height:calc(100vh - 200px)}.design-scope-EI3Ht .chooser-list{position:absolute;padding-top:20px;padding-bottom:20px;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;box-sizing:border-box}.design-scope-EI3Ht .chooser-item{margin:0 15px}}",""]),t.locals={scope:"design-scope-EI3Ht"}},1681:function(e,t,i){var s=i(1435),n=i(7);"string"==typeof s&&(s=[[e.id,s,""]]),e.exports=s.locals||{},e.exports._getContent=function(){return s},e.exports._getCss=function(){return s.toString()},e.exports._insertCss=function(e){return n(s,e)}},2038:function(e,t,i){i(5);e.exports=function(e){var t="";Array.prototype.join;return t+='<section class="edit-pane-header">\n    <div class="back glyph-center glyph-angle-left"></div>\n    <h1>Appearance</h1>\n</section>\n\n<section class="edit-pane-content edit-pane-scroller rule-top">\n    <ul class="editlinks with-glyph">\n        <li data-drilldown="photo" class="photo glyph-photo glyph-angle-right-after">\n            <a href="/user/edit/appearance/photo">\n                <div class="label">Photo</div>\n            </a>\n        </li>\n        <li data-drilldown="design" class="design glyph-design glyph-angle-right-after">\n            <a href="/user/edit/appearance/design">\n                <div class="label">Design &amp; Color</div>\n            </a>\n        </li>\n    </ul>\n</section>\n'}},2055:function(e,t,i){i(5);e.exports=function(e){var t="";Array.prototype.join;return t+='<section class="edit-pane-header">\n    <div class="back glyph-center glyph-angle-left"></div>\n    <h1>Design &amp; Color</h1>\n</section>\n\n<section class="edit-pane-content edit-pane-scroller rule-top pad-top">\n    <section class="colors-container pad-horizontal"></section>\n    <section class="designs-container"></section>\n</section>\n'}}});
//# sourceMappingURL=edit-appearance.af64343cf624a912f3fc.bundle.js.map